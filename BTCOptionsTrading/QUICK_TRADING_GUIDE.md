# 快速交易功能使用指南

## 概述

快速交易功能允许您立即执行已保存的策略，无需等待定时任务。这是定时交易的即时版本。

## 功能特点

- ⚡ 立即执行：点击按钮即可立即下单
- 🧪 测试网支持：可在测试网安全测试
- 🔐 安全验证：需要API密钥验证
- 📊 实时反馈：显示订单详情和执行结果
- ⚠️ 风险提示：明确的风险警告和确认

## 使用步骤

### 1. 准备工作

确保您已经：
- 创建并保存了策略
- 获取了Deribit API密钥和密钥
- 在测试网有足够的余额（测试模式）

### 2. 打开快速交易

在策略列表中，找到要执行的策略，点击 "⚡ 快速交易" 按钮。

### 3. 配置API

1. **选择模式**
   - 🧪 测试网模式（推荐）：使用测试网，不会使用真实资金
   - 💰 真实交易模式：使用真实资金交易

2. **输入API密钥**
   - API Key: 您的Deribit API密钥
   - API Secret: 您的Deribit API密钥

3. **测试连接**
   - 点击 "测试连接" 按钮
   - 等待连接测试结果
   - 确保显示 "✓ API连接成功"

### 4. 执行交易

1. 点击 "⚡ 立即执行" 按钮
2. 确认弹窗中的信息
3. 等待执行完成
4. 查看执行结果

## 执行结果

成功执行后，您将看到：

### 订单详情
- 合约名称
- 买入/卖出方向
- 数量
- 成交价格
- 订单ID

### 总成本
显示所有订单的总成本（BTC）

## 与定时交易的区别

| 特性 | 快速交易 | 定时交易 |
|------|---------|---------|
| 执行时间 | 立即执行 | 定时执行 |
| 使用场景 | 需要立即响应市场 | 计划性交易 |
| 配置 | 每次输入API密钥 | 保存API密钥配置 |
| 自动平仓 | 不支持 | 支持 |
| 重复执行 | 不支持 | 支持 |

## 使用场景

### 适合快速交易
- 突发新闻需要立即响应
- 价格达到理想位置
- 测试策略执行
- 一次性交易

### 适合定时交易
- 每天固定时间交易
- 需要自动平仓
- 长期策略执行
- 无需人工干预

## 风险管理

### 测试网测试
1. 始终先在测试网测试
2. 验证策略逻辑正确
3. 确认订单执行符合预期
4. 检查成本计算准确

### 真实交易注意事项
1. ⚠️ 确保账户有足够余额
2. ⚠️ 注意市场流动性
3. ⚠️ 设置合理的止损
4. ⚠️ 不要投入超过承受范围的资金

### 市场风险
- 价格波动可能导致实际成交价与预期不同
- 市场流动性不足可能导致部分成交或无法成交
- 滑点可能影响最终成本

## 常见问题

### Q: 为什么连接测试失败？
A: 可能的原因：
- API密钥或密钥错误
- 网络连接问题
- Deribit服务器问题
- API权限不足

### Q: 执行失败怎么办？
A: 检查：
- 账户余额是否足够
- 合约是否存在
- API权限是否正确
- 市场是否开放

### Q: 可以撤销已执行的订单吗？
A: 快速交易执行后无法自动撤销，但您可以：
- 手动在Deribit平台撤销未成交订单
- 执行反向策略平仓
- 使用定时交易的自动平仓功能

### Q: 测试网和真实网有什么区别？
A: 
- 测试网使用虚拟资金，不会有真实损失
- 测试网数据可能与真实市场略有不同
- 测试网用于学习和测试，真实网用于实际交易

## 最佳实践

### 1. 充分测试
```
测试网测试 → 小额真实测试 → 正常交易
```

### 2. 分批执行
对于大额交易，考虑：
- 分多次执行
- 使用限价单而非市价单
- 监控市场深度

### 3. 记录交易
- 记录每次交易的时间和原因
- 分析交易结果
- 总结经验教训

### 4. 风险控制
- 设置每日最大损失限额
- 不要在情绪化时交易
- 保持冷静和理性

## 技术细节

### API端点
```
POST /api/quick-trading/execute
GET /api/quick-trading/test-connection
```

### 请求格式
```json
{
  "strategy_id": "uuid",
  "test_mode": true,
  "api_key": "your_api_key",
  "api_secret": "your_api_secret"
}
```

### 响应格式
```json
{
  "success": true,
  "message": "策略执行成功",
  "orders": [
    {
      "instrument_name": "BTC-6MAR26-66000-C",
      "side": "buy",
      "amount": 1,
      "price": 0.0508,
      "order_id": "12345"
    }
  ],
  "total_cost": 0.0508,
  "execution_time": "2026-02-24T00:52:32"
}
```

## 相关文档

- [定时交易使用指南](./SCHEDULED_TRADING_README.md)
- [智能策略使用指南](./SMART_STRATEGY_README.md)
- [事件驱动型策略](./EVENT_DRIVEN_STRATEGIES.md)
- [API配置指南](./API_CONFIGURATION_GUIDE.md)

## 支持

如有问题，请查看：
- [故障排除指南](./BUGFIX_GUIDE.md)
- Deribit API文档
- 项目README
