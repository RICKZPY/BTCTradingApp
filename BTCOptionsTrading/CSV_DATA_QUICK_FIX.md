# CSV 数据显示 - 快速修复指南

## 问题
"在历史数据分析页面下，点击合约分析，下拉框里还是没有数据"

## 原因
你在看错了标签页。有两个不同的标签页：
- **"合约分析"** - 显示数据库中的数据（可能为空）
- **"CSV数据分析"** - 显示 CSV 文件中的数据（1300 个合约）✓

## 解决方案 - 3 步

### 步骤 1: 打开历史数据分析
在应用菜单中点击"历史数据分析"

### 步骤 2: 找到标签页
你会看到 4 个标签页：
```
[数据概览] [合约分析] [CSV数据分析] [数据质量]
```

### 步骤 3: 点击"CSV数据分析"
点击第三个标签页 **"CSV数据分析"**

## 结果
✅ 下拉菜单会显示 1300 个合约
✅ 选择一个合约后，会显示价格曲线、波动率、成交量等图表

## 验证

### 方法 1: 浏览器控制台
1. 按 F12 打开开发者工具
2. 切换到 Console 标签页
3. 运行：
```javascript
fetch('/api/csv/contracts?underlying=BTC')
  .then(r => r.json())
  .then(d => console.log('合约数:', d.contracts.length))
```
4. 应该看到：`合约数: 1300`

### 方法 2: 命令行
```bash
curl http://localhost:8000/api/csv/contracts?underlying=BTC | jq '.contracts | length'
# 应该输出: 1300
```

## 常见问题

**Q: 为什么"合约分析"显示 0 个合约？**
A: 因为"合约分析"使用的是数据库 API，而不是 CSV API。如果数据库中没有数据，就会显示 0 个。

**Q: CSV 数据和历史数据有什么区别？**
A: 
- CSV 数据：从 `backend/data/downloads/` 目录的 CSV 文件读取
- 历史数据：从数据库读取

**Q: 如何导入 CSV 数据到数据库？**
A: 这需要额外的配置。目前 CSV 数据和数据库数据是分开的。

## 下一步

1. ✓ 使用"CSV数据分析"标签页查看数据
2. ✓ 选择合约并分析价格曲线
3. ✓ 如果需要在"合约分析"中显示 CSV 数据，请联系开发团队

---

**最后更新**: 2026年2月23日
