# CSV数据分析 - 用户指南 (User Guide)

## 功能介绍 (Feature Overview)

CSV数据分析功能允许您查看和分析从服务器收集的历史期权数据。通过直观的图表和数据可视化，您可以深入了解不同合约的价格变动、波动率变化和成交量情况。

## 界面导航 (Navigation)

### 1. 打开历史数据分析页面
```
主菜单 → 历史数据分析
```

### 2. 选择CSV数据分析视图
在页面顶部的标签页中点击 **"CSV数据分析"**

```
[数据概览] [合约分析] [CSV数据分析] ← 点击这里 [数据质量]
```

## 使用步骤 (Step-by-Step Guide)

### 步骤1: 选择合约
1. 在"选择CSV合约"卡片中找到下拉菜单
2. 点击下拉菜单展开合约列表
3. 选择要分析的合约

```
选择CSV合约
┌─────────────────────────────────────┐
│ BTC-25FEB26-60000-C (执行价: $60,000) ▼ │
└─────────────────────────────────────┘
共有 250 个可用合约
```

### 步骤2: 查看合约信息
选择合约后，系统会自动加载并显示合约的基本信息：

```
合约信息
┌──────────────────────────────────────────────────┐
│ 合约名称: BTC-25FEB26-60000-C                    │
│ 标的资产: BTC                                    │
│ 执行价: $60,000                                  │
│ 期权类型: 看涨 (Call)                            │
│ 到期日: 2026年2月25日                            │
│ 数据点数: 500                                    │
│ 平均价格: 0.0234 BTC                            │
│ 数据时间范围: 2026年2月1日 ~ 2026年2月22日      │
└──────────────────────────────────────────────────┘
```

### 步骤3: 分析价格曲线
查看"价格曲线"图表，了解合约价格的历史变动：

```
价格曲线
┌─────────────────────────────────────────────────┐
│                                                 │
│  0.025 ┤     ╱╲                                 │
│        │    ╱  ╲    ╱╲                          │
│  0.023 ┤   ╱    ╲  ╱  ╲                         │
│        │  ╱      ╲╱    ╲                        │
│  0.021 ┤ ╱              ╲                       │
│        │                 ╲                      │
│  0.019 ┤                  ╲                     │
│        └─────────────────────────────────────── │
│        2月1日  2月8日  2月15日  2月22日         │
│                                                 │
│ ─── 标记价格  ─── 买价  ─── 卖价               │
└─────────────────────────────────────────────────┘
```

**图表说明**:
- **黄色线**: 标记价格（市场中间价）
- **绿色线**: 买价（Bid）
- **红色线**: 卖价（Ask）

### 步骤4: 分析波动率
查看"隐含波动率"图表，了解期权市场的波动预期：

```
隐含波动率
┌─────────────────────────────────────────────────┐
│                                                 │
│  70% ┤                                          │
│      │    ╱╲                                    │
│  65% ┤   ╱  ╲    ╱╲                             │
│      │  ╱    ╲  ╱  ╲                            │
│  60% ┤ ╱      ╲╱    ╲                           │
│      │                ╲                         │
│  55% ┤                 ╲                        │
│      └─────────────────────────────────────── │
│      2月1日  2月8日  2月15日  2月22日          │
│                                                 │
│ ─── 隐含波动率                                 │
└─────────────────────────────────────────────────┘
```

**解读**:
- 波动率上升 → 市场预期价格波动增大
- 波动率下降 → 市场预期价格波动减小

### 步骤5: 分析成交量
查看"成交量"图表，了解合约的流动性：

```
成交量
┌─────────────────────────────────────────────────┐
│                                                 │
│ 2000 ┤  ┃                                       │
│      │  ┃  ┃                                    │
│ 1500 ┤  ┃  ┃  ┃                                 │
│      │  ┃  ┃  ┃  ┃                              │
│ 1000 ┤  ┃  ┃  ┃  ┃  ┃                           │
│      │  ┃  ┃  ┃  ┃  ┃  ┃                        │
│  500 ┤  ┃  ┃  ┃  ┃  ┃  ┃                        │
│      └─────────────────────────────────────── │
│      2月1日  2月8日  2月15日  2月22日          │
│                                                 │
│ ■ 成交量                                       │
└─────────────────────────────────────────────────┘
```

**解读**:
- 成交量高 → 流动性好，容易成交
- 成交量低 → 流动性差，可能难以成交

## 图表交互 (Chart Interactions)

### 缩放 (Zoom)
- **鼠标滚轮**: 向上滚动放大，向下滚动缩小
- **触摸板**: 两指捏合缩放

### 平移 (Pan)
- **鼠标拖动**: 按住并拖动图表移动
- **触摸**: 用手指拖动

### 数据提示 (Tooltip)
- **悬停**: 将鼠标悬停在数据点上查看详细信息

```
┌─────────────────────────────┐
│ 2026年2月15日 08:00:00      │
│ 标记价格: 0.0234 BTC        │
│ 买价: 0.0232 BTC            │
│ 卖价: 0.0236 BTC            │
└─────────────────────────────┘
```

### 图例切换 (Legend Toggle)
- **点击图例**: 点击图表下方的图例项可以显示/隐藏对应的数据线

```
─── 标记价格  ─── 买价  ─── 卖价
 ↑ 点击可切换显示/隐藏
```

## 常见分析场景 (Common Analysis Scenarios)

### 场景1: 评估期权价值
**目标**: 判断期权是否被高估或低估

**步骤**:
1. 选择要分析的合约
2. 查看"价格曲线"中的标记价格
3. 对比历史平均价格
4. 判断当前价格是否合理

**示例**:
- 如果当前价格 > 历史平均价格 → 可能被高估
- 如果当前价格 < 历史平均价格 → 可能被低估

### 场景2: 分析市场情绪
**目标**: 了解市场对未来价格波动的预期

**步骤**:
1. 选择多个不同执行价的合约
2. 查看"隐含波动率"图表
3. 对比不同合约的波动率变化
4. 判断市场情绪

**示例**:
- 波动率普遍上升 → 市场看空，预期波动增大
- 波动率普遍下降 → 市场看好，预期波动减小

### 场景3: 评估流动性
**目标**: 判断合约是否容易成交

**步骤**:
1. 选择要交易的合约
2. 查看"成交量"图表
3. 查看"价格曲线"中的买卖价差
4. 判断流动性

**示例**:
- 成交量高，买卖价差小 → 流动性好
- 成交量低，买卖价差大 → 流动性差

## 数据说明 (Data Explanation)

### 价格类型
| 类型 | 说明 |
|------|------|
| 标记价格 | 交易所计算的中间价格 |
| 买价 (Bid) | 买方愿意支付的最高价格 |
| 卖价 (Ask) | 卖方愿意接受的最低价格 |

### 波动率
- **隐含波动率 (IV)**: 市场对未来价格波动的预期
- 范围: 0% - 100%+
- 越高表示市场预期波动越大

### 成交量
- **单位**: 合约数量
- **含义**: 该时间段内的交易量
- **用途**: 评估流动性

## 故障排除 (Troubleshooting)

### 问题1: 看不到CSV数据分析标签页
**原因**: 后端API未启动或CSV文件不存在
**解决方案**:
1. 确保后端API正在运行
2. 检查CSV文件是否存在于 `/root/BTCTradingApp/BTCOptionsTrading/backend/data/daily_snapshots/`
3. 刷新页面重试

### 问题2: 合约列表为空
**原因**: CSV文件中没有数据或格式不正确
**解决方案**:
1. 检查CSV文件的格式
2. 确保CSV文件包含必要的列（instrument_name, timestamp等）
3. 调用 `/api/csv/sync` 端点同步数据

### 问题3: 图表显示不完整
**原因**: 数据缺失或浏览器缓存问题
**解决方案**:
1. 清除浏览器缓存
2. 刷新页面
3. 检查CSV文件中的数据完整性

### 问题4: 数据加载缓慢
**原因**: CSV文件过大或网络连接慢
**解决方案**:
1. 调用 `/api/csv/sync` 端点预加载数据到缓存
2. 等待首次加载完成
3. 后续加载会更快

## 快捷键 (Keyboard Shortcuts)

| 快捷键 | 功能 |
|--------|------|
| `Ctrl + R` | 刷新数据 |
| `Ctrl + S` | 保存图表 |
| `Esc` | 关闭提示框 |

## 最佳实践 (Best Practices)

### 1. 定期更新数据
- 定期调用 `/api/csv/sync` 同步最新数据
- 确保分析基于最新的市场数据

### 2. 多维度分析
- 不仅查看价格，还要看波动率和成交量
- 综合判断而不是单一指标决策

### 3. 历史对比
- 对比不同时间段的数据
- 识别价格和波动率的规律

### 4. 风险管理
- 在高波动率时期谨慎交易
- 关注流动性，避免流动性风险

## 相关资源 (Related Resources)

- [完整文档](./CSV_DATA_INTEGRATION.md)
- [快速开始](./CSV_DATA_QUICK_START.md)
- [API文档](./backend/HISTORICAL_DATA_API.md)
- [数据收集指南](./backend/DAILY_COLLECTION_GUIDE.md)

## 反馈和支持 (Feedback & Support)

如有问题或建议，请：
1. 查看本指南的故障排除部分
2. 查看完整文档
3. 检查API日志获取更多信息
4. 联系技术支持

---

**最后更新**: 2026年2月22日
**版本**: 1.0.0
